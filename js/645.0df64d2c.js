"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[645],{645:function(e,a,n){n.r(a),n.d(a,{default:function(){return k}});var t=n(6768),l=n(4232);const s=(0,t.Lk)("a",{style:{color:"red"}},"删除",-1),o=["onClick"],d={key:0};function i(e,a,n,i,u,r){const p=(0,t.g2)("a-button"),c=(0,t.g2)("a-space"),g=(0,t.g2)("a-popconfirm"),v=(0,t.g2)("a-table"),k=(0,t.g2)("a-input"),m=(0,t.g2)("a-form-item"),b=(0,t.g2)("a-select-option"),y=(0,t.g2)("a-select"),C=(0,t.g2)("a-form"),f=(0,t.g2)("a-modal");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("p",null,[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{type:"primary",onClick:a[0]||(a[0]=a=>e.handleQuery())},{default:(0,t.k6)((()=>[(0,t.eW)("刷新")])),_:1}),(0,t.bF)(p,{type:"primary",onClick:e.onAdd},{default:(0,t.k6)((()=>[(0,t.eW)("新增")])),_:1},8,["onClick"])])),_:1})]),(0,t.bF)(v,{dataSource:e.passengers,columns:e.columns,pagination:e.pagination,onChange:e.handleTableChange,loading:e.loading},{bodyCell:(0,t.k6)((({column:a,record:n})=>["operation"===a.dataIndex?((0,t.uX)(),(0,t.Wv)(c,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(g,{title:"删除后不可恢复，确认删除?",onConfirm:a=>e.onDelete(n),"ok-text":"确认","cancel-text":"取消"},{default:(0,t.k6)((()=>[s])),_:2},1032,["onConfirm"]),(0,t.Lk)("a",{onClick:a=>e.onEdit(n)},"编辑",8,o)])),_:2},1024)):"type"===a.dataIndex?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:1},(0,t.pI)(e.PASSENGER_TYPE_ARRAY,(e=>((0,t.uX)(),(0,t.CE)("span",{key:e.code},[e.code===n.type?((0,t.uX)(),(0,t.CE)("span",d,(0,l.v_)(e.desc),1)):(0,t.Q3)("",!0)])))),128)):(0,t.Q3)("",!0)])),_:1},8,["dataSource","columns","pagination","onChange","loading"]),(0,t.bF)(f,{visible:e.visible,"onUpdate:visible":a[4]||(a[4]=a=>e.visible=a),title:"乘车人",onOk:e.handleOk,"ok-text":"确认","cancel-text":"取消"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{model:e.passenger,"label-col":{span:4},"wrapper-col":{span:20}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"姓名"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{value:e.passenger.name,"onUpdate:value":a[1]||(a[1]=a=>e.passenger.name=a)},null,8,["value"])])),_:1}),(0,t.bF)(m,{label:"身份证"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{value:e.passenger.idCard,"onUpdate:value":a[2]||(a[2]=a=>e.passenger.idCard=a)},null,8,["value"])])),_:1}),(0,t.bF)(m,{label:"旅客类型"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{value:e.passenger.type,"onUpdate:value":a[3]||(a[3]=a=>e.passenger.type=a)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.PASSENGER_TYPE_ARRAY,(e=>((0,t.uX)(),(0,t.Wv)(b,{key:e.code,value:e.code},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.desc),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","onOk"])],64)}var u=n(144),r=n(5108),p=n(8355),c=(0,t.pM)({name:"passenger-view",setup(){const e=window.PASSENGER_TYPE_ARRAY,a=(0,u.KR)(!1);let n=(0,u.KR)({id:void 0,memberId:void 0,name:void 0,idCard:void 0,type:void 0,createTime:void 0,updateTime:void 0});const l=(0,u.KR)([]),s=(0,u.KR)({total:0,current:1,pageSize:10});let o=(0,u.KR)(!1);const d=[{title:"会员id",dataIndex:"memberId",key:"memberId"},{title:"姓名",dataIndex:"name",key:"name"},{title:"身份证",dataIndex:"idCard",key:"idCard"},{title:"旅客类型",dataIndex:"type",key:"type"},{title:"操作",dataIndex:"operation"}],i=()=>{n.value={},a.value=!0},c=e=>{n.value=window.Tool.copy(e),a.value=!0},g=e=>{p.A.delete("/member/passenger/delete/"+e.id).then((e=>{const a=e.data;a.success?(r.A.success({description:"删除成功！"}),k({page:s.value.current,size:s.value.pageSize})):r.A.error({description:a.message})}))},v=()=>{p.A.post("/member/passenger/save",n.value).then((e=>{let n=e.data;n.success?(r.A.success({description:"保存成功！"}),a.value=!1,k({page:s.value.current,size:s.value.pageSize})):r.A.error({description:n.message})}))},k=e=>{e||(e={page:1,size:s.value.pageSize}),o.value=!0,p.A.get("/member/passenger/query-list",{params:{page:e.page,size:e.size}}).then((a=>{o.value=!1;let n=a.data;n.success?(l.value=n.content.list,s.value.current=e.page,s.value.total=n.content.total):r.A.error({description:n.message})}))},m=e=>{k({page:e.current,size:e.pageSize})};return(0,t.sV)((()=>{k({page:1,size:s.value.pageSize})})),{PASSENGER_TYPE_ARRAY:e,passenger:n,visible:a,passengers:l,pagination:s,columns:d,handleTableChange:m,handleQuery:k,loading:o,onAdd:i,handleOk:v,onEdit:c,onDelete:g}}}),g=n(1241);const v=(0,g.A)(c,[["render",i]]);var k=v}}]);
//# sourceMappingURL=645.0df64d2c.js.map
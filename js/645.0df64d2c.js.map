{"version":3,"file":"js/645.0df64d2c.js","mappings":"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","sources":["webpack://web/./src/views/main/passenger.vue","webpack://web/./src/views/main/passenger.vue?177f"],"sourcesContent":["<template>\r\n  <p>\r\n    <a-space>\r\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\r\n      <a-button type=\"primary\" @click=\"onAdd\">新增</a-button>\r\n    </a-space>\r\n  </p>\r\n  <a-table :dataSource=\"passengers\"\r\n           :columns=\"columns\"\r\n           :pagination=\"pagination\"\r\n           @change=\"handleTableChange\"\r\n           :loading=\"loading\">\r\n    <template #bodyCell=\"{ column, record }\">\r\n      <template v-if=\"column.dataIndex === 'operation'\">\r\n        <a-space>\r\n          <a-popconfirm\r\n              title=\"删除后不可恢复，确认删除?\"\r\n              @confirm=\"onDelete(record)\"\r\n              ok-text=\"确认\" cancel-text=\"取消\">\r\n            <a style=\"color: red\">删除</a>\r\n          </a-popconfirm>\r\n          <a @click=\"onEdit(record)\">编辑</a>\r\n        </a-space>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'type'\">\r\n        <span v-for=\"item in PASSENGER_TYPE_ARRAY\" :key=\"item.code\">\r\n          <span v-if=\"item.code === record.type\">\r\n            {{ item.desc }}\r\n          </span>\r\n        </span>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n  <a-modal v-model:visible=\"visible\" title=\"乘车人\" @ok=\"handleOk\"\r\n           ok-text=\"确认\" cancel-text=\"取消\">\r\n    <a-form :model=\"passenger\" :label-col=\"{span: 4}\" :wrapper-col=\"{ span: 20 }\">\r\n      <a-form-item label=\"姓名\">\r\n        <a-input v-model:value=\"passenger.name\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"身份证\">\r\n        <a-input v-model:value=\"passenger.idCard\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"旅客类型\">\r\n        <a-select v-model:value=\"passenger.type\">\r\n          <a-select-option v-for=\"item in PASSENGER_TYPE_ARRAY\" :key=\"item.code\" :value=\"item.code\">\r\n            {{ item.desc }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\nimport {defineComponent, ref, onMounted} from 'vue';\r\nimport {notification} from \"ant-design-vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default defineComponent({\r\n  name: \"passenger-view\",\r\n  setup() {\r\n    const PASSENGER_TYPE_ARRAY = window.PASSENGER_TYPE_ARRAY;\r\n    const visible = ref(false);\r\n    let passenger = ref({\r\n      id: undefined,\r\n      memberId: undefined,\r\n      name: undefined,\r\n      idCard: undefined,\r\n      type: undefined,\r\n      createTime: undefined,\r\n      updateTime: undefined,\r\n    });\r\n    const passengers = ref([]);\r\n    // 分页的三个属性名是固定的\r\n    const pagination = ref({\r\n      total: 0,\r\n      current: 1,\r\n      pageSize: 10,\r\n    });\r\n    let loading = ref(false);\r\n    const columns = [\r\n      {\r\n        title: '会员id',\r\n        dataIndex: 'memberId',\r\n        key: 'memberId',\r\n      },\r\n      {\r\n        title: '姓名',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n      },\r\n      {\r\n        title: '身份证',\r\n        dataIndex: 'idCard',\r\n        key: 'idCard',\r\n      },\r\n      {\r\n        title: '旅客类型',\r\n        dataIndex: 'type',\r\n        key: 'type',\r\n      },\r\n      {\r\n        title: '操作',\r\n        dataIndex: 'operation'\r\n      }\r\n    ];\r\n\r\n    const onAdd = () => {\r\n      passenger.value = {};\r\n      visible.value = true;\r\n    };\r\n\r\n    const onEdit = (record) => {\r\n      passenger.value = window.Tool.copy(record);\r\n      visible.value = true;\r\n    };\r\n\r\n    const onDelete = (record) => {\r\n      axios.delete(\"/member/passenger/delete/\" + record.id).then((response) => {\r\n        const data = response.data;\r\n        if (data.success) {\r\n          notification.success({description: \"删除成功！\"});\r\n          handleQuery({\r\n            page: pagination.value.current,\r\n            size: pagination.value.pageSize,\r\n          });\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    const handleOk = () => {\r\n      axios.post(\"/member/passenger/save\", passenger.value).then((response) => {\r\n        let data = response.data;\r\n        if (data.success) {\r\n          notification.success({description: \"保存成功！\"});\r\n          visible.value = false;\r\n          handleQuery({\r\n            page: pagination.value.current,\r\n            size: pagination.value.pageSize\r\n          });\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    const handleQuery = (param) => {\r\n      if (!param) {\r\n        param = {\r\n          page: 1,\r\n          size: pagination.value.pageSize\r\n        };\r\n      }\r\n      loading.value = true;\r\n      axios.get(\"/member/passenger/query-list\", {\r\n        params: {\r\n          page: param.page,\r\n          size: param.size\r\n        }\r\n      }).then((response) => {\r\n        loading.value = false;\r\n        let data = response.data;\r\n        if (data.success) {\r\n          passengers.value = data.content.list;\r\n          // 设置分页控件的值\r\n          pagination.value.current = param.page;\r\n          pagination.value.total = data.content.total;\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    const handleTableChange = (pagination) => {\r\n      // console.log(\"看看自带的分页参数都有啥：\" + pagination);\r\n      handleQuery({\r\n        page: pagination.current,\r\n        size: pagination.pageSize\r\n      });\r\n    };\r\n\r\n    onMounted(() => {\r\n      handleQuery({\r\n        page: 1,\r\n        size: pagination.value.pageSize\r\n      });\r\n    });\r\n\r\n    return {\r\n      PASSENGER_TYPE_ARRAY,\r\n      passenger,\r\n      visible,\r\n      passengers,\r\n      pagination,\r\n      columns,\r\n      handleTableChange,\r\n      handleQuery,\r\n      loading,\r\n      onAdd,\r\n      handleOk,\r\n      onEdit,\r\n      onDelete\r\n    };\r\n  },\r\n});\r\n</script>","import { render } from \"./passenger.vue?vue&type=template&id=1ddc7ab7\"\nimport script from \"./passenger.vue?vue&type=script&lang=js\"\nexport * from \"./passenger.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","style","key","_createElementBlock","_Fragment","_createVNode","_component_a_space","default","_withCtx","_component_a_button","type","onClick","_cache","$event","_ctx","handleQuery","_createTextVNode","_","onAdd","_component_a_table","dataSource","passengers","columns","pagination","onChange","handleTableChange","loading","bodyCell","column","record","dataIndex","_createBlock","_component_a_popconfirm","title","onConfirm","onDelete","_hoisted_1","onEdit","_hoisted_2","_renderList","PASSENGER_TYPE_ARRAY","item","code","_hoisted_3","_toDisplayString","desc","_createCommentVNode","_component_a_modal","visible","onOk","handleOk","_component_a_form","model","passenger","span","_component_a_form_item","label","_component_a_input","value","name","idCard","_component_a_select","_component_a_select_option","defineComponent","setup","window","ref","id","undefined","memberId","createTime","updateTime","total","current","pageSize","Tool","copy","axios","delete","then","response","data","success","notification","description","page","size","error","message","post","param","get","params","content","list","onMounted","__exports__","render"],"sourceRoot":""}
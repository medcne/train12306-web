{"version":3,"file":"js/257.7285176e.js","mappings":"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","sources":["webpack://web/./src/views/main/my-ticket.vue","webpack://web/./src/views/main/my-ticket.vue?8507"],"sourcesContent":["<template>\r\n  <p>\r\n    <a-space>\r\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\r\n\r\n    </a-space>\r\n  </p>\r\n  <a-table :dataSource=\"tickets\"\r\n           :columns=\"columns\"\r\n           :pagination=\"pagination\"\r\n           @change=\"handleTableChange\"\r\n           :loading=\"loading\">\r\n    <template #bodyCell=\"{ column, record }\">\r\n      <template v-if=\"column.dataIndex === 'operation'\">\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'col'\">\r\n        <span v-for=\"item in SEAT_COL_ARRAY\" :key=\"item.code\">\r\n          <span v-if=\"item.code === record.col && item.type === record.seatType\">\r\n            {{item.desc}}\r\n          </span>\r\n        </span>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'seatType'\">\r\n        <span v-for=\"item in SEAT_TYPE_ARRAY\" :key=\"item.code\">\r\n          <span v-if=\"item.code === record.seatType\">\r\n            {{item.desc}}\r\n          </span>\r\n        </span>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, onMounted } from 'vue';\r\nimport {notification} from \"ant-design-vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default defineComponent({\r\n  name: \"ticket-view\",\r\n  setup() {\r\n    const SEAT_COL_ARRAY = window.SEAT_COL_ARRAY;\r\n    const SEAT_TYPE_ARRAY = window.SEAT_TYPE_ARRAY;\r\n    const visible = ref(false);\r\n    let ticket = ref({\r\n      id: undefined,\r\n      memberId: undefined,\r\n      passengerId: undefined,\r\n      passengerName: undefined,\r\n      date: undefined,\r\n      trainCode: undefined,\r\n      carriageIndex: undefined,\r\n      row: undefined,\r\n      col: undefined,\r\n      start: undefined,\r\n      startTime: undefined,\r\n      end: undefined,\r\n      endTime: undefined,\r\n      seatType: undefined,\r\n      createTime: undefined,\r\n      updateTime: undefined,\r\n    });\r\n    const tickets = ref([]);\r\n    // 分页的三个属性名是固定的\r\n    const pagination = ref({\r\n      total: 0,\r\n      current: 1,\r\n      pageSize: 10,\r\n    });\r\n    let loading = ref(false);\r\n    const columns = [\r\n      {\r\n        title: '乘客姓名',\r\n        dataIndex: 'passengerName',\r\n        key: 'passengerName',\r\n      },\r\n      {\r\n        title: '日期',\r\n        dataIndex: 'trainDate',\r\n        key: 'trainDate',\r\n      },\r\n      {\r\n        title: '车次编号',\r\n        dataIndex: 'trainCode',\r\n        key: 'trainCode',\r\n      },\r\n      {\r\n        title: '箱序',\r\n        dataIndex: 'carriageIndex',\r\n        key: 'carriageIndex',\r\n      },\r\n      {\r\n        title: '排号',\r\n        dataIndex: 'seatRow',\r\n        key: 'seatRow',\r\n      },\r\n      {\r\n        title: '列号',\r\n        dataIndex: 'seatCol',\r\n        key: 'seatCol',\r\n      },\r\n      {\r\n        title: '出发站',\r\n        dataIndex: 'startStation',\r\n        key: 'startStation',\r\n      },\r\n      {\r\n        title: '出发时间',\r\n        dataIndex: 'startTime',\r\n        key: 'startTime',\r\n      },\r\n      {\r\n        title: '到达站',\r\n        dataIndex: 'endStation',\r\n        key: 'endStation',\r\n      },\r\n      {\r\n        title: '到站时间',\r\n        dataIndex: 'endTime',\r\n        key: 'endTime',\r\n      },\r\n      {\r\n        title: '座位类型',\r\n        dataIndex: 'seatType',\r\n        key: 'seatType',\r\n      },\r\n      {\r\n        title: '出票时间',\r\n        dataIndex: 'createTime',\r\n        key: 'createTime',\r\n      },\r\n    ];\r\n\r\n\r\n    const handleQuery = (param) => {\r\n      if (!param) {\r\n        param = {\r\n          page: 1,\r\n          size: pagination.value.pageSize\r\n        };\r\n      }\r\n      loading.value = true;\r\n      axios.get(\"/member/ticket/query-list\", {\r\n        params: {\r\n          page: param.page,\r\n          size: param.size\r\n        }\r\n      }).then((response) => {\r\n        loading.value = false;\r\n        let data = response.data;\r\n        if (data.success) {\r\n          tickets.value = data.content.list;\r\n          // 设置分页控件的值\r\n          pagination.value.current = param.page;\r\n          pagination.value.total = data.content.total;\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    const handleTableChange = (page) => {\r\n      // console.log(\"看看自带的分页参数都有啥：\" + JSON.stringify(page));\r\n      pagination.value.pageSize = page.pageSize;\r\n      handleQuery({\r\n        page: page.current,\r\n        size: page.pageSize\r\n      });\r\n    };\r\n\r\n    onMounted(() => {\r\n      handleQuery({\r\n        page: 1,\r\n        size: pagination.value.pageSize\r\n      });\r\n    });\r\n\r\n    return {\r\n      SEAT_COL_ARRAY,\r\n      SEAT_TYPE_ARRAY,\r\n      ticket,\r\n      visible,\r\n      tickets,\r\n      pagination,\r\n      columns,\r\n      handleTableChange,\r\n      handleQuery,\r\n      loading,\r\n    };\r\n  },\r\n});\r\n</script>\r\n","import { render } from \"./my-ticket.vue?vue&type=template&id=5cc3927d\"\nimport script from \"./my-ticket.vue?vue&type=script&lang=js\"\nexport * from \"./my-ticket.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","_createElementBlock","_Fragment","_createElementVNode","_createVNode","_component_a_space","default","_withCtx","_component_a_button","type","onClick","_cache","$event","_ctx","handleQuery","_createTextVNode","_","_component_a_table","dataSource","tickets","columns","pagination","onChange","handleTableChange","loading","bodyCell","column","record","dataIndex","_renderList","SEAT_COL_ARRAY","item","code","col","seatType","_hoisted_1","_toDisplayString","desc","_createCommentVNode","SEAT_TYPE_ARRAY","_hoisted_2","defineComponent","name","setup","window","visible","ref","ticket","id","undefined","memberId","passengerId","passengerName","date","trainCode","carriageIndex","row","start","startTime","end","endTime","createTime","updateTime","total","current","pageSize","title","param","page","size","value","axios","get","params","then","response","data","success","content","list","notification","error","description","message","onMounted","__exports__","render"],"sourceRoot":""}
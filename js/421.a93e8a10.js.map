{"version":3,"file":"js/421.a93e8a10.js","mappings":"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","sources":["webpack://web/./src/views/main/ticket.vue","webpack://web/./src/components/station-select.vue","webpack://web/./src/components/station-select.vue?1937","webpack://web/./src/views/main/ticket.vue?1cef"],"sourcesContent":["<template>\r\n  <p>\r\n    <a-space>\r\n      <a-date-picker v-model:value=\"params.date\" valueFormat=\"YYYY-MM-DD\" placeholder=\"请选择日期\"></a-date-picker>\r\n      <station-select-view v-model=\"params.start\" width=\"200px\"></station-select-view>\r\n      <station-select-view v-model=\"params.end\" width=\"200px\"></station-select-view>\r\n      <a-button type=\"primary\" @click=\"handleQuery()\">查找</a-button>\r\n    </a-space>\r\n  </p>\r\n  <a-table :dataSource=\"dailyTrainTickets\"\r\n           :columns=\"columns\"\r\n           :pagination=\"pagination\"\r\n           @change=\"handleTableChange\"\r\n           :loading=\"loading\">\r\n    <template #bodyCell=\"{ column, record }\">\r\n      <template v-if=\"column.dataIndex === 'operation'\">\r\n        <a-button type=\"primary\" @click=\"toOrder(record)\">预订</a-button>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'station'\">\r\n        {{record.start}}<br/>\r\n        {{record.end}}\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'time'\">\r\n        {{record.startTime}}<br/>\r\n        {{record.endTime}}\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'duration'\">\r\n        {{calDuration(record.startTime, record.endTime)}}<br/>\r\n        <div v-if=\"record.startTime.replaceAll(':', '') >= record.endTime.replaceAll(':', '')\">\r\n          次日到达\r\n        </div>\r\n        <div v-else>\r\n          当日到达\r\n        </div>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'ydz'\">\r\n        <div v-if=\"record.ydz >= 0\">\r\n          {{record.ydz}}<br/>\r\n          {{record.ydzPrice}}￥\r\n        </div>\r\n        <div v-else>\r\n          --\r\n        </div>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'edz'\">\r\n        <div v-if=\"record.edz >= 0\">\r\n          {{record.edz}}<br/>\r\n          {{record.edzPrice}}￥\r\n        </div>\r\n        <div v-else>\r\n          --\r\n        </div>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'rw'\">\r\n        <div v-if=\"record.rw >= 0\">\r\n          {{record.rw}}<br/>\r\n          {{record.rwPrice}}￥\r\n        </div>\r\n        <div v-else>\r\n          --\r\n        </div>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'yw'\">\r\n        <div v-if=\"record.yw >= 0\">\r\n          {{record.yw}}<br/>\r\n          {{record.ywPrice}}￥\r\n        </div>\r\n        <div v-else>\r\n          --\r\n        </div>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, onMounted } from 'vue';\r\nimport {notification} from \"ant-design-vue\";\r\nimport axios from \"axios\";\r\nimport StationSelectView from \"@/components/station-select\";\r\nimport dayjs from \"dayjs\";\r\nimport router from \"@/router\";\r\n\r\nexport default defineComponent({\r\n  name: \"ticket-view\",\r\n  components: {StationSelectView},\r\n  setup() {\r\n    const visible = ref(false);\r\n    let dailyTrainTicket = ref({\r\n      id: undefined,\r\n      date: undefined,\r\n      trainCode: undefined,\r\n      start: undefined,\r\n      startPinyin: undefined,\r\n      startTime: undefined,\r\n      startIndex: undefined,\r\n      end: undefined,\r\n      endPinyin: undefined,\r\n      endTime: undefined,\r\n      endIndex: undefined,\r\n      ydz: undefined,\r\n      ydzPrice: undefined,\r\n      edz: undefined,\r\n      edzPrice: undefined,\r\n      rw: undefined,\r\n      rwPrice: undefined,\r\n      yw: undefined,\r\n      ywPrice: undefined,\r\n      createTime: undefined,\r\n      updateTime: undefined,\r\n    });\r\n    const dailyTrainTickets = ref([]);\r\n    // 分页的三个属性名是固定的\r\n    const pagination = ref({\r\n      total: 0,\r\n      current: 1,\r\n      pageSize: 10,\r\n    });\r\n    let loading = ref(false);\r\n    const params = ref({});\r\n    const columns = [\r\n      {\r\n        title: '车次编号',\r\n        dataIndex: 'trainCode',\r\n        key: 'trainCode',\r\n      },\r\n      {\r\n        title: '车站',\r\n        dataIndex: 'station',\r\n      },\r\n      {\r\n        title: '时间',\r\n        dataIndex: 'time',\r\n      },\r\n      {\r\n        title: '历时',\r\n        dataIndex: 'duration',\r\n      },\r\n      {\r\n        title: '一等座',\r\n        dataIndex: 'ydz',\r\n        key: 'ydz',\r\n      },\r\n      {\r\n        title: '二等座',\r\n        dataIndex: 'edz',\r\n        key: 'edz',\r\n      },\r\n      {\r\n        title: '软卧',\r\n        dataIndex: 'rw',\r\n        key: 'rw',\r\n      },\r\n      {\r\n        title: '硬卧',\r\n        dataIndex: 'yw',\r\n        key: 'yw',\r\n      },\r\n      {\r\n        title: '操作',\r\n        dataIndex: 'operation',\r\n      },\r\n    ];\r\n\r\n\r\n    const handleQuery = (param) => {\r\n      if (Tool.isEmpty(params.value.date)) {\r\n        notification.error({description: \"请输入日期\"});\r\n        return;\r\n      }\r\n      if (Tool.isEmpty(params.value.start)) {\r\n        notification.error({description: \"请输入出发地\"});\r\n        return;\r\n      }\r\n      if (Tool.isEmpty(params.value.end)) {\r\n        notification.error({description: \"请输入目的地\"});\r\n        return;\r\n      }\r\n      if (!param) {\r\n        param = {\r\n          page: 1,\r\n          size: pagination.value.pageSize\r\n        };\r\n      }\r\n\r\n      // 保存查询参数\r\n      SessionStorage.set(SESSION_TICKET_PARAMS, params.value);\r\n\r\n      loading.value = true;\r\n      axios.get(\"/business/daily-train-ticket/query-list\", {\r\n        params: {\r\n          page: param.page,\r\n          size: param.size,\r\n          trainCode: params.value.trainCode,\r\n          date: params.value.date,\r\n          start: params.value.start,\r\n          end: params.value.end\r\n        }\r\n      }).then((response) => {\r\n        loading.value = false;\r\n        let data = response.data;\r\n        if (data.success) {\r\n          dailyTrainTickets.value = data.content.list;\r\n          // 设置分页控件的值\r\n          pagination.value.current = param.page;\r\n          pagination.value.total = data.content.total;\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    const handleTableChange = (page) => {\r\n      // console.log(\"看看自带的分页参数都有啥：\" + JSON.stringify(page));\r\n      pagination.value.pageSize = page.pageSize;\r\n      handleQuery({\r\n        page: page.current,\r\n        size: page.pageSize\r\n      });\r\n    };\r\n\r\n    const calDuration = (startTime, endTime) => {\r\n      let diff = dayjs(endTime, 'HH:mm:ss').diff(dayjs(startTime, 'HH:mm:ss'), 'seconds');\r\n      return dayjs('00:00:00', 'HH:mm:ss').second(diff).format('HH:mm:ss');\r\n    };\r\n\r\n    const toOrder = (record) => {\r\n      dailyTrainTicket.value = Tool.copy(record);\r\n      SessionStorage.set(SESSION_ORDER, dailyTrainTicket.value);\r\n      router.push(\"/order\")\r\n    };\r\n\r\n    onMounted(() => {\r\n      //  \"|| {}\"是常用技巧，可以避免空指针异常\r\n      params.value = SessionStorage.get(SESSION_TICKET_PARAMS) || {};\r\n      if (Tool.isNotEmpty(params.value)) {\r\n        handleQuery({\r\n          page: 1,\r\n          size: pagination.value.pageSize\r\n        });\r\n      }\r\n    });\r\n\r\n    return {\r\n      dailyTrainTicket,\r\n      visible,\r\n      dailyTrainTickets,\r\n      pagination,\r\n      columns,\r\n      handleTableChange,\r\n      handleQuery,\r\n      loading,\r\n      params,\r\n      calDuration,\r\n      toOrder\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n","<template>\r\n  <a-select v-model:value=\"name\" show-search allowClear\r\n            :filterOption=\"filterNameOption\"\r\n            @change=\"onChange\" placeholder=\"请选择车站\"\r\n            :style=\"'width: ' + localWidth\">\r\n    <a-select-option v-for=\"item in stations\" :key=\"item.name\" :value=\"item.name\" :label=\"item.name + item.namePinyin + item.namePy\">\r\n      {{item.name}} {{item.namePinyin}} ~ {{item.namePy}}\r\n    </a-select-option>\r\n  </a-select>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {defineComponent, onMounted, ref, watch} from 'vue';\r\nimport axios from \"axios\";\r\nimport {notification} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"station-select-view\",\r\n  props: [\"modelValue\", \"width\"],\r\n  emits: ['update:modelValue', 'change'],\r\n  setup(props, {emit}) {\r\n    const name = ref();\r\n    const stations = ref([]);\r\n    const localWidth = ref(props.width);\r\n    if (Tool.isEmpty(props.width)) {\r\n      localWidth.value = \"100%\";\r\n    }\r\n\r\n    // 利用watch，动态获取父组件的值，如果放在onMounted或其它方法里，则只有第一次有效\r\n    watch(() => props.modelValue, ()=>{\r\n      console.log(\"props.modelValue\", props.modelValue);\r\n      name.value = props.modelValue;\r\n    }, {immediate: true});\r\n\r\n    /**\r\n     * 查询所有的车站，用于车站下拉框\r\n     */\r\n    const queryAllStation = () => {\r\n      axios.get(\"/business/station/query-all\").then((response) => {\r\n        let data = response.data;\r\n        if (data.success) {\r\n          stations.value = data.content;\r\n        } else {\r\n          notification.error({description: data.message});\r\n        }\r\n      });\r\n    };\r\n\r\n    /**\r\n     * 车站下拉框筛选\r\n     */\r\n    const filterNameOption = (input, option) => {\r\n      console.log(input, option);\r\n      return option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0;\r\n    };\r\n\r\n    /**\r\n     * 将当前组件的值响应给父组件\r\n     * @param value\r\n     */\r\n    const onChange = (value) => {\r\n      emit('update:modelValue', value);\r\n      let station = stations.value.filter(item => item.code === value)[0];\r\n      if (Tool.isEmpty(station)) {\r\n        station = {};\r\n      }\r\n      emit('change', station);\r\n    };\r\n\r\n    onMounted(() => {\r\n      queryAllStation();\r\n    });\r\n\r\n    return {\r\n      name,\r\n      stations,\r\n      filterNameOption,\r\n      onChange,\r\n      localWidth\r\n    };\r\n  },\r\n});\r\n</script>","import { render } from \"./station-select.vue?vue&type=template&id=b99d92ae\"\nimport script from \"./station-select.vue?vue&type=script&lang=js\"\nexport * from \"./station-select.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ticket.vue?vue&type=template&id=9d3190da\"\nimport script from \"./ticket.vue?vue&type=script&lang=js\"\nexport * from \"./ticket.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","key","_createElementBlock","_Fragment","_createVNode","_component_a_space","default","_withCtx","_component_a_date_picker","value","_ctx","params","date","_cache","$event","valueFormat","placeholder","_component_station_select_view","modelValue","start","width","end","_component_a_button","type","onClick","handleQuery","_createTextVNode","_","_component_a_table","dataSource","dailyTrainTickets","columns","pagination","onChange","handleTableChange","loading","bodyCell","column","record","dataIndex","_createBlock","toOrder","_toDisplayString","_hoisted_1","startTime","_hoisted_2","endTime","calDuration","_hoisted_3","replaceAll","_hoisted_4","_hoisted_5","ydz","_hoisted_6","_hoisted_7","ydzPrice","_hoisted_8","edz","_hoisted_9","_hoisted_10","edzPrice","_hoisted_11","rw","_hoisted_12","_hoisted_13","rwPrice","_hoisted_14","yw","_hoisted_15","_hoisted_16","ywPrice","_hoisted_17","_createCommentVNode","_component_a_select","name","allowClear","filterOption","filterNameOption","style","_normalizeStyle","localWidth","_renderList","stations","item","_component_a_select_option","label","namePinyin","namePy","defineComponent","props","emits","setup","emit","ref","Tool","isEmpty","watch","console","log","immediate","queryAllStation","axios","get","then","response","data","success","content","notification","error","description","message","input","option","toLowerCase","indexOf","station","filter","code","onMounted","__exports__","components","StationSelectView","visible","dailyTrainTicket","id","undefined","trainCode","startPinyin","startIndex","endPinyin","endIndex","createTime","updateTime","total","current","pageSize","title","param","page","size","SessionStorage","set","SESSION_TICKET_PARAMS","list","diff","dayjs","second","format","copy","SESSION_ORDER","router","push","isNotEmpty","render"],"sourceRoot":""}